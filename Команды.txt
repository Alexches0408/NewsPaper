from news.models import *
// Создаём двух пользователей
first_user = User.objects.create(username = "firts_user", first_name="serg")
second_user = User.objects.create(username = "second_user", first_name="Veronika")

// Создаём два объекта модели Author
Author.objects.create(user=first_user)
Author.objects.create(user=second_user)

// Добавляем четыре категории
Category.objects.create(category='Sport')
Category.objects.create(category='Weather')
Category.objects.create(category='Animals')
Category.objects.create(category='Games')

// Добавляем две статьи и новость
Post.objects.create(author=Author.objects.get(user=User.objects.get(username='firts_user')), type='ar', title='New sport title', content='smth news about sport in the world')
Post.objects.create(author=Author.objects.get(user=User.objects.get(username='second_user')), type='ar', title='Weather title', content='smth about weather in your city')
Post.objects.create(author=Author.objects.get(user=User.objects.get(username='firts_user')), type='nw', title='Crime events title', content='smth about crime happened in your city')

//Присваиваем постам категории
p1=Post.objects.get(pk=1)
p1=Post.objects.get(pk=1)
p2=Post.objects.get(pk=2)
p3=Post.objects.get(pk=3)
c1=Category.objects.get(category = 'Sport')
c2=Category.objects.get(category = 'Weather')
c3=Category.objects.get(category = 'Animals')
p1.category.add(c1)
p2.category.add(c2)
p3.category.add(c2,c3)

//Создаем комментарии к постам
Comment.objects.create(user=User.objects.get(username='firts_user'), post=Post.objects.get(pk=1), text='My first comment')
Comment.objects.create(user=User.objects.get(username='second_user'), post=Post.objects.get(pk=2), text='My second comment')
Comment.objects.create(user=User.objects.get(username='firts_user'), post=Post.objects.get(pk=3), text='My third comment')
Comment.objects.create(user=User.objects.get(username='second_user'), post=Post.objects.get(pk=1), text='My fourth comment')

//Корректируем рейтинги постов и комментариев
Post.objects.get(pk=1).like()
Post.objects.get(pk=1).like()
Post.objects.get(pk=2).like()
Post.objects.get(pk=3).dislike()
Post.objects.get(pk=1).dislike()
Comment.objects.get(pk=1).like()
Comment.objects.get(pk=1).like()
Comment.objects.get(pk=1).like()
Comment.objects.get(pk=2).dislike()
Comment.objects.get(pk=2).dislike()
Comment.objects.get(pk=3).like()
Comment.objects.get(pk=3).like()
Comment.objects.get(pk=4).like()
Comment.objects.get(pk=4).dislike()

// Обновляем рейтинг пользователей
Author.objects.get(user=User.objects.get(username='second_user')).update_rating()
Author.objects.get(user=User.objects.get(username='firts_user')).update_rating()

// Выводим username и рейтинг лучшего пользователя
best_username = User.objects.get(pk = Author.objects.all().order_by('-rating').values('user')[0]['user']).username
best_rating = Author.objects.all().order_by('-rating').values('rating')[0]['rating']
print(f"Лучший пользователь: {best_username} его рейтинг:{best_rating}")

//Выводим дату добавления, username автора, рейтинг, заголовок и превью лучшей статьи 
win_article= Post.objects.all().order_by('-rating')[0]
print(f'Лучшая статья опубликована: {win_article.pub_date} автором: {win_article.author.user}\nCтатья имеет рейтинг: {win_article.rating}, заголовок: {win_article.title}\nКраткое содержание статьи: {win_article.preview()}')

//Выводим все комментарии (дата, пользователь, рейтинг, текст) к этой статье
for comment in wincomments:
    print(f'Дата: {comment.comment_date}, пользователь: {comment.user}, рейтинг: {comment.rating}, текст: {comment.text}')